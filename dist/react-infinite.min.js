!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Infinite=e()}}(function(){return function e(t,i,r){function n(a,l){if(!i[a]){if(!t[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(o)return o(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return n(i?i:e)},c,c.exports,e,t,i,r)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(e,t,i){(function(i){var r=i.React||e("react"),n=e("lodash.isarray"),o=e("lodash.isfinite"),a=e("./computers/constant_infinite_computer.js"),l=e("./computers/array_infinite_computer.js"),s=r.createClass({displayName:"Infinite",propTypes:{handleScroll:r.PropTypes.func,preloadBatchSize:r.PropTypes.number,preloadAdditionalHeight:r.PropTypes.number,elementHeight:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.arrayOf(r.PropTypes.number)]).isRequired,containerHeight:r.PropTypes.number,containerWindowTop:r.PropTypes.number,infiniteLoadBeginBottomOffset:r.PropTypes.number,onInfiniteLoad:r.PropTypes.func,loadingSpinnerDelegate:r.PropTypes.node,isInfiniteLoading:r.PropTypes.bool,timeScrollStateLastsForAfterUserScrolls:r.PropTypes.number,className:r.PropTypes.string},getDefaultProps:function(){return{handleScroll:function(){},loadingSpinnerDelegate:r.createElement("div",null),onInfiniteLoad:function(){},isInfiniteLoading:!1,timeScrollStateLastsForAfterUserScrolls:150}},getInitialState:function(){var e=this.createInfiniteComputer(this.props.elementHeight,this.props.children),t=this.getPreloadBatchSizeFromProps(this.props),i=this.getPreloadAdditionalHeightFromProps(this.props);return{infiniteComputer:e,numberOfChildren:r.Children.count(this.props.children),displayIndexStart:0,displayIndexEnd:e.getDisplayIndexEnd(t+i),isInfiniteLoading:!1,preloadBatchSize:t,preloadAdditionalHeight:i,scrollTimeout:void 0,isScrolling:!1}},createInfiniteComputer:function(e,t){var i,s=r.Children.count(t);if(o(e))i=new a(e,s);else{if(!n(e))throw new Error("You must provide either a number or an array of numbers as the elementHeight prop.");i=new l(e,s)}return i},componentWillReceiveProps:function(e){var t=this,i={};i.infiniteComputer=this.createInfiniteComputer(e.elementHeight,e.children),void 0!==e.isInfiniteLoading&&(i.isInfiniteLoading=e.isInfiniteLoading),i.preloadBatchSize=this.getPreloadBatchSizeFromProps(e),i.preloadAdditionalHeight=this.getPreloadAdditionalHeightFromProps(e),this.setState(i,function(){t.setStateFromScrollTop(t.getScrollTop())})},getPreloadBatchSizeFromProps:function(e){return e.preloadBatchSize?e.preloadBatchSize:(e.containerHeight||window.innerHeight)/2},getPreloadAdditionalHeightFromProps:function(e){return e.preloadAdditionalHeight?e.preloadAdditionalHeight:e.containerHeight||window.innerHeight},componentDidUpdate:function(e,t){r.Children.count(this.props.children)!==r.Children.count(e.children)&&this.setStateFromScrollTop(this.getScrollTop())},componentWillMount:function(){if(n(this.props.elementHeight)&&r.Children.count(this.props.children)!==this.props.elementHeight.length)throw new Error("There must be as many values provided in the elementHeight prop as there are children.")},getScrollTop:function(){return this.props.containerWindowTop?window.scrollY-this.props.containerWindowTop:this.refs.scrollable.getDOMNode().scrollTop},setStateFromScrollTop:function(e){var t=Math.floor(e/this.state.preloadBatchSize),i=this.state.preloadBatchSize*t,r=i+this.state.preloadBatchSize,n=Math.max(0,i-this.state.preloadAdditionalHeight),o=Math.min(this.state.infiniteComputer.getTotalScrollableHeight(),r+this.state.preloadAdditionalHeight);this.setState({displayIndexStart:this.state.infiniteComputer.getDisplayIndexStart(n),displayIndexEnd:this.state.infiniteComputer.getDisplayIndexEnd(o)})},infiniteHandleScroll:function(e){(this.props.containerWindowTop||e.target===this.refs.scrollable.getDOMNode())&&(this.props.handleScroll(this.refs.scrollable.getDOMNode()),this.handleScroll(this.getScrollTop()))},manageScrollTimeouts:function(){this.state.scrollTimeout&&clearTimeout(this.state.scrollTimeout);var e=this,t=setTimeout(function(){e.setState({isScrolling:!1,scrollTimeout:void 0})},this.props.timeScrollStateLastsForAfterUserScrolls);this.setState({isScrolling:!0,scrollTimeout:t})},handleScroll:function(e){this.manageScrollTimeouts(),this.setStateFromScrollTop(e);var t=e>this.state.infiniteComputer.getTotalScrollableHeight()-(this.props.containerHeight||window.innerHeight)-this.props.infiniteLoadBeginBottomOffset;t&&!this.state.isInfiniteLoading&&(this.setState({isInfiniteLoading:!0}),this.props.onInfiniteLoad())},buildScrollableStyle:function(){return this.props.containerHeight?{height:this.props.containerHeight,overflowX:"hidden",overflowY:"scroll"}:{}},buildHeightStyle:function(e){return{width:"100%",height:Math.ceil(e)+"px"}},componentDidMount:function(){this.props.containerWindowTop&&window.addEventListener("scroll",this.infiniteHandleScroll)},componentWillUnmount:function(){this.props.containerWindowTop&&window.removeEventListener("scroll",this.infiniteHandleScroll)},render:function(){var e=this.props.children.slice(this.state.displayIndexStart,this.state.displayIndexEnd+1),t={};this.state.isScrolling&&(t.pointerEvents="none");var i=this.state.infiniteComputer.getTopSpacerHeight(this.state.displayIndexStart),n=this.state.infiniteComputer.getBottomSpacerHeight(this.state.displayIndexEnd);return r.createElement("div",{className:this.props.className?this.props.className:"",ref:"scrollable",style:this.buildScrollableStyle(),onScroll:this.infiniteHandleScroll},r.createElement("div",{ref:"smoothScrollingWrapper",style:t},r.createElement("div",{ref:"topSpacer",style:this.buildHeightStyle(i)}),e,r.createElement("div",{ref:"bottomSpacer",style:this.buildHeightStyle(n)}),r.createElement("div",{ref:"loadingSpinner"},this.state.isInfiniteLoading?this.props.loadingSpinnerDelegate:null)))}});t.exports=s,i.Infinite=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./computers/array_infinite_computer.js":4,"./computers/constant_infinite_computer.js":5,"lodash.isarray":2,"lodash.isfinite":3,react:void 0}],2:[function(e,t,i){function r(e){return!!e&&"object"==typeof e}function n(e,t){var i=null==e?void 0:e[t];return s(i)?i:void 0}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&S>=e}function a(e){return l(e)&&g.call(e)==c}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null==e?!1:a(e)?y.test(d.call(e)):r(e)&&u.test(e)}var p="[object Array]",c="[object Function]",u=/^\[object .+?Constructor\]$/,h=Object.prototype,d=Function.prototype.toString,f=h.hasOwnProperty,g=h.toString,y=RegExp("^"+d.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=n(Array,"isArray"),S=9007199254740991,b=m||function(e){return r(e)&&o(e.length)&&g.call(e)==p};t.exports=b},{}],3:[function(e,t,i){(function(e){function i(e){return"number"==typeof e&&r(e)}var r=e.isFinite;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,i){function r(e,t){"use strict";n.call(this,e,t),this.prefixHeightData=this.heightData.reduce(function(e,t){return 0===e.length?[t]:(e.push(e[e.length-1]+t),e)},[])}var n=e("./infinite_computer.js"),o=e("../utils/binary_index_search.js");for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a]);var l=null===n?null:n.prototype;r.prototype=Object.create(l),r.prototype.constructor=r,r.__superConstructor__=n,Object.defineProperty(r.prototype,"getTotalScrollableHeight",{writable:!0,configurable:!0,value:function(){"use strict";var e=this.prefixHeightData.length;return 0===e?0:this.prefixHeightData[e-1]}}),Object.defineProperty(r.prototype,"getDisplayIndexStart",{writable:!0,configurable:!0,value:function(e){"use strict";return o.binaryIndexSearch(this.prefixHeightData,e,o.opts.CLOSEST_HIGHER)}}),Object.defineProperty(r.prototype,"getDisplayIndexEnd",{writable:!0,configurable:!0,value:function(e){"use strict";var t=o.binaryIndexSearch(this.prefixHeightData,e,o.opts.CLOSEST_HIGHER);return"undefined"==typeof t?this.prefixHeightData.length-1:t}}),Object.defineProperty(r.prototype,"getTopSpacerHeight",{writable:!0,configurable:!0,value:function(e){"use strict";var t=e-1;return 0>t?0:this.prefixHeightData[t]}}),Object.defineProperty(r.prototype,"getBottomSpacerHeight",{writable:!0,configurable:!0,value:function(e){"use strict";return-1===e?0:this.getTotalScrollableHeight()-this.prefixHeightData[e]}}),t.exports=r},{"../utils/binary_index_search.js":7,"./infinite_computer.js":6}],5:[function(e,t,i){function r(){"use strict";null!==n&&n.apply(this,arguments)}var n=e("./infinite_computer.js");for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);var a=null===n?null:n.prototype;r.prototype=Object.create(a),r.prototype.constructor=r,r.__superConstructor__=n,Object.defineProperty(r.prototype,"getTotalScrollableHeight",{writable:!0,configurable:!0,value:function(){"use strict";return this.heightData*this.numberOfChildren}}),Object.defineProperty(r.prototype,"getDisplayIndexStart",{writable:!0,configurable:!0,value:function(e){"use strict";return Math.floor(e/this.heightData)}}),Object.defineProperty(r.prototype,"getDisplayIndexEnd",{writable:!0,configurable:!0,value:function(e){"use strict";var t=Math.ceil(e/this.heightData);return t>0?t-1:t}}),Object.defineProperty(r.prototype,"getTopSpacerHeight",{writable:!0,configurable:!0,value:function(e){"use strict";return e*this.heightData}}),Object.defineProperty(r.prototype,"getBottomSpacerHeight",{writable:!0,configurable:!0,value:function(e){"use strict";var t=e+1;return Math.max(0,(this.numberOfChildren-t)*this.heightData)}}),t.exports=r},{"./infinite_computer.js":6}],6:[function(e,t,i){function r(e,t){"use strict";this.heightData=e,this.numberOfChildren=t}Object.defineProperty(r.prototype,"getTotalScrollableHeight",{writable:!0,configurable:!0,value:function(){"use strict";throw new Error("getTotalScrollableHeight not implemented.")}}),Object.defineProperty(r.prototype,"getDisplayIndexStart",{writable:!0,configurable:!0,value:function(e){"use strict";throw new Error("getDisplayIndexStart not implemented.")}}),Object.defineProperty(r.prototype,"getDisplayIndexEnd",{writable:!0,configurable:!0,value:function(e){"use strict";throw new Error("getDisplayIndexEnd not implemented.")}}),Object.defineProperty(r.prototype,"getTopSpacerHeight",{writable:!0,configurable:!0,value:function(e){"use strict";throw new Error("getTopSpacerHeight not implemented.")}}),Object.defineProperty(r.prototype,"getBottomSpacerHeight",{writable:!0,configurable:!0,value:function(e){"use strict";throw new Error("getBottomSpacerHeight not implemented.")}}),t.exports=r},{}],7:[function(e,t,i){var r={CLOSEST_LOWER:1,CLOSEST_HIGHER:2},n=function(e,t,i){for(var n,o,a,l=e.length-1,s=0;l>=s;){if(o=s+Math.floor((l-s)/2),a=e[o],a===t)return o;t>a?s=o+1:a>t&&(l=o-1)}return i===r.CLOSEST_LOWER&&s>0?n=s-1:i===r.CLOSEST_HIGHER&&l<e.length-1&&(n=l+1),n};t.exports={binaryIndexSearch:n,opts:r}},{}]},{},[1])(1)});